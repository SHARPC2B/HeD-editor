<knowledgeDocument xmlns="urn:hl7-org:knowledgeartifact:r1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:vmr="urn:hl7-org:vmr:r2" xmlns:dt="urn:hl7-org:cdsdt:r2" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:xml="http://www.w3.org/XML/1998/namespace" xsi:schemaLocation="urn:hl7-org:knowledgeartifact:r1 ../schema/knowledgeartifact/knowledgedocument.xsd  urn:hl7-org:vmr:r2  ../schema/vmr/vmr.xsd">
	<metadata>
		<identifiers>
			<identifier root="SDCOID_PertussisClinicanNoLabs" version="1"></identifier>
		</identifiers>
		<artifactType value="Rule"></artifactType>

		<schemaIdentifier root="urn:hl7-org:knowledgeartifact:r1" version="1"></schemaIdentifier>

		<dataModels>
			<modelReference>
				<description value="Virtual Medical Record model release 2 candidate"></description>
				<referencedModel value="urn:hl7-org:vmr:r2"></referencedModel>
			</modelReference>
		</dataModels>

		<title value="San Diego County Public Health Reporting for Pertussis: Clinician Reporting "></title>
		<description value="This document describes the reporting requirements for Clinician   Reporting for Pertussis with and without Lab Data in San Diego County."></description>
		<relatedResources>
			<relatedResource>
				<relationship value="AssociatedResource"></relationship>
				<resources>
					<resource>
						<title value="Disease Reporting Requirements for Health Care Providers"></title>
						<location value="http://www.sdcounty.ca.gov/hhsa/programs/phs/community_epidemiology/disease_reporting_requirements_for_health_care_providers.html"></location>
					</resource>
					<resource>
						<title value="Clinical Laboratory Reporting and Specimen Submission Guidelines"></title>
						<location value="http://www.sdcounty.ca.gov/hhsa/programs/phs/community_epidemiology/disease_reporting_requirements_for_laboratorians.html"></location>
					</resource>
					<resource>
						<title value="California Reportable Diseases and Conditions"></title>
						<location value="http://www.cdph.ca.gov/HealthInfo/Pages/ReportableDiseases.aspx"></location>
					</resource>
					<resource>
						<title value="Clinical Laboratory Reporting and Specimen Submission Guidelines"></title>
						<location value="http://www.sdcounty.ca.gov/hhsa/programs/phs/documents/SDCPHL_2011_Lab_Reporting.pdf"></location>
					</resource>
					<resource>
						<title value="San Diego County Public Health Laboratory"></title>
						<location value="http://www.sdcounty.ca.gov/hhsa/programs/phs/phs_laboratory/index.html"></location>
					</resource>

					<resource>
						<title value="San Diego County Epidemiology Program"></title>
						<location value="http://www.sdcounty.ca.gov/hhsa/programs/phs/community_epidemiology/"></location>
					</resource>
				</resources>
			</relatedResource>
		</relatedResources>
		<applicability>
			<coverage>
				<focus value="ClinicalFocus"></focus>
				<value code="033.0" codeSystem="2.16.840.1.113883.6.103" codeSystemName="ICD9-CM">
					<dt:displayName xmlns:dt="urn:hl7-org:cdsdt:r2" value="Whooping cough due to bordetella pertussis"></dt:displayName>
				</value>
			</coverage>
			
			
			<coverage>
				<focus value="ClinicalVenue"></focus>
				<value code="261Q00000X" codeSystem="2.16.840.1.113883.1.11.19465" codeSystemName="NUCC non-individual providers">
					<dt:displayName xmlns:dt="urn:hl7-org:cdsdt:r2" value="Clinic/Center"></dt:displayName>
				</value>
			</coverage>
			<coverage>
				<focus value="ClinicalVenue"></focus>
				<value code="282N00000X" codeSystem="2.16.840.1.113883.1.11.19465" codeSystemName="NUCC non-individual providers">
					<dt:displayName xmlns:dt="urn:hl7-org:cdsdt:r2" value="General Acute Care Hospital"></dt:displayName>
				</value>
			</coverage>
		</applicability>
		<categories>
			<category>
				<dt:displayName xmlns:dt="urn:hl7-org:cdsdt:r2" value="Public health notifiable condition"></dt:displayName>
			</category>
		</categories>

		<status value="Active"></status>
		<eventHistory>
			<artifactLifeCycleEvent>
				<eventType value="Created"></eventType>
				<eventDateTime value="20130401"></eventDateTime>
			</artifactLifeCycleEvent>
			<artifactLifeCycleEvent>
				<eventType value="Published"></eventType>
				<eventDateTime value="20130617"></eventDateTime>
			</artifactLifeCycleEvent>
		</eventHistory>
		<contributions>
			<contribution>
				<contributor xsi:type="Organization">
					<addresses>
						<address>
							<dt:part xmlns:dt="urn:hl7-org:cdsdt:r2" type="SAL" value="3851 Rosecrans Street"></dt:part>
							<dt:part xmlns:dt="urn:hl7-org:cdsdt:r2" type="ADL" value="Mailstop P577"></dt:part>
							<dt:part xmlns:dt="urn:hl7-org:cdsdt:r2" type="CTY" value="San Diego"></dt:part>
							<dt:part xmlns:dt="urn:hl7-org:cdsdt:r2" type="ZIP" value="92110"></dt:part>
							<dt:part xmlns:dt="urn:hl7-org:cdsdt:r2" type="STA" value="CA"></dt:part>
							<dt:part xmlns:dt="urn:hl7-org:cdsdt:r2" type="CNT" value="USA"></dt:part>
						</address>
					</addresses>
					<contacts>
						<contact capabilities="voice" use="WP" value="tel:619-692-8499"></contact>
						<contact capabilities="fax" use="WP" value="tel:858-715-6458"></contact>
					</contacts>
					<name value="San Diego County Health and Human Services Agency Epidemiology and Immunization Services Branch/ Immunization Program"></name>
				</contributor>
				<role value="Author"></role>
			</contribution>
		</contributions>
		<publishers>
			<publisher xsi:type="Organization">
				<addresses>
					<address>
						<dt:part xmlns:dt="urn:hl7-org:cdsdt:r2" type="SAL" value="3851 Rosecrans Street"></dt:part>
						<dt:part xmlns:dt="urn:hl7-org:cdsdt:r2" type="ADL" value="Mailstop P577"></dt:part>
						<dt:part xmlns:dt="urn:hl7-org:cdsdt:r2" type="CTY" value="San Diego"></dt:part>
						<dt:part xmlns:dt="urn:hl7-org:cdsdt:r2" type="ZIP" value="92110"></dt:part>
						<dt:part xmlns:dt="urn:hl7-org:cdsdt:r2" type="STA" value="CA"></dt:part>
						<dt:part xmlns:dt="urn:hl7-org:cdsdt:r2" type="CNT" value="USA"></dt:part>
					</address>
				</addresses>
				<contacts>
					<contact capabilities="voice" use="WP" value="tel:619-692-8499"></contact>
					<contact capabilities="fax" use="WP" value="tel:858-715-6458"></contact>
				</contacts>
				<name value="San Diego County Health and Human Services Agency Epidemiology and Immunization Services Branch/ Immunization Program"></name>
			</publisher>
		</publishers>
		<usageTerms>
			
			<rightsDeclaration>
				<assertedRights value="Copyright (2012)"></assertedRights>
				<rightsHolder xsi:type="Organization">
					<addresses>
						<address>
							<dt:part xmlns:dt="urn:hl7-org:cdsdt:r2" type="SAL" value="3851 Rosecrans Street"></dt:part>
							<dt:part xmlns:dt="urn:hl7-org:cdsdt:r2" type="ADL" value="Mailstop P577"></dt:part>
							<dt:part xmlns:dt="urn:hl7-org:cdsdt:r2" type="CTY" value="San Diego"></dt:part>
							<dt:part xmlns:dt="urn:hl7-org:cdsdt:r2" type="ZIP" value="92110"></dt:part>
							<dt:part xmlns:dt="urn:hl7-org:cdsdt:r2" type="STA" value="CA"></dt:part>
							<dt:part xmlns:dt="urn:hl7-org:cdsdt:r2" type="CNT" value="USA"></dt:part>
						</address>
					</addresses>
					<contacts>
						<contact capabilities="voice" use="WP" value="tel:619-692-8499"></contact>
						<contact capabilities="fax" use="WP" value="tel:858-715-6458"></contact>
					</contacts>
					<name value="San Diego County Health and Human Services Agency Epidemiology and Immunization Services Branch/ Immunization Program"></name>
				</rightsHolder>
			</rightsDeclaration>
		</usageTerms>
	</metadata>
	<externalData>
		<def name="Patient">
			<expression cardinality="Single" dataType="vmr:EvaluatedPerson" isInitial="true" xsi:type="ClinicalRequest">
				<description>Get patient data object</description>
			</expression>
		</def>
		<def name="PertussisProblems">
			<expression cardinality="Multiple" codeProperty="problemCode" dataType="vmr:Problem" dateProperty="diagnosticEventTime.begin" isInitial="true" triggerType="DataElementAdded" useValueSets="true" xsi:type="ClinicalRequest">
				<description>Pertussis problem - addition of this data element is a
					trigger for the rule
				</description>
				<codes id="2.16.840.1.114222.4.11.7005" version="1" xsi:type="ValueSet"></codes>
			</expression>
		</def>

		<def name="PertussisProblemsWithDeathVS">
			<expression cardinality="Multiple" codeProperty="problemCode" dataType="vmr:Problem" dateProperty="diagnosticEventTime.begin" isInitial="true" triggerType="DataElementAdded" useValueSets="true" xsi:type="ClinicalRequest">
				<description>Pertussis problem - addition of this data element is a
					trigger for the rule.
					This problem code maps to a different value set than the previous one.
				</description>
				<codes id="2.16.840.1.114222.4.11.7004" version="1" xsi:type="ValueSet"></codes>
			</expression>

		</def>

		<def name="BPertussisCultureTests">
			<expression cardinality="Multiple" codeProperty="observationFocus" dataType="vmr:ObservationResult" dateProperty="observationEventTime.begin" isInitial="true" triggerType="DataElementAdded" useValueSets="true" xsi:type="ClinicalRequest">
				<description>Result of Bordetella pertussis culture from a clinical
					specimen
					- addition of this data element is a trigger for the rule
				</description>
				<codes id="2.16.840.1.114222.4.11.7035" version="1" xsi:type="ValueSet"></codes>
			</expression>
		</def>

		<def name="BPertussisTestResults">
			<expression cardinality="Multiple" codeProperty="observationFocus" dataType="vmr:ObservationResult" dateProperty="observationEventTime.begin" isInitial="true" triggerType="DataElementAdded" useValueSets="true" xsi:type="ClinicalRequest">
				<description>Results from any test specific for pertussis
					- Pertussis problem - addition of this data element is a trigger for
					the rule
				</description>
				<codes id="2.16.840.1.114222.4.11.7034" version="1" xsi:type="ValueSet"></codes>
			</expression>
		</def>

		<def name="GeneralCultureTests">
			<expression cardinality="Multiple" codeProperty="observationFocus" dataType="vmr:ObservationResult" dateProperty="observationEventTime.begin" isInitial="true" triggerType="DataElementAdded" useValueSets="true" xsi:type="ClinicalRequest">
				<description>Culture test that is not specific to an organism -
					addition of this data element is a trigger for the rule
				</description>
				<codes id="2.16.840.1.114222.4.11.TBD" version="1" xsi:type="ValueSet"></codes>
			</expression>
		</def>

	</externalData>


	<expressions>

		<def name="PatientLivesInSDCounty">
			<expression xsi:type="IsNotEmpty">
				<description>Returns true if there are any primary home addresses in
					San Diego county
				</description>
				<operand xsi:type="Filter">
					<description>From the set of addresses for the patient, get all
						that are
						marked as primary home and for which the county is San Diego
					</description>
					<source path="address" xsi:type="Property">
						<description>All the patient addresses</description>
						<source name="Patient" xsi:type="ExpressionRef"></source>
					</source>
					<condition xsi:type="And">
						<operand xsi:type="Equal">
							<description>Is San Diego the county</description>
							<operand path="value" xsi:type="Property">
								<source xsi:type="First">
									<source xsi:type="Filter">
										<description>Get the county part of the address</description>
										<source path="part" xsi:type="Property"></source>
										<condition xsi:type="Equal">
											<operand path="type" xsi:type="Property"></operand>
											<operand value="CNT" xsi:type="StringLiteral"></operand>
										</condition>
									</source>
								</source>
							</operand>
							<operand value="San Diego" xsi:type="StringLiteral"></operand>
						</operand>
						<operand xsi:type="Contains">
							<description>Is the address identified as primary home address
							</description>
							<source path="use" xsi:type="Property"></source>
							<element value="HP" xsi:type="StringLiteral"></element>
						</operand>
					</condition>
				</operand>
			</expression>
		</def>


		<def name="ActivePertussisProblems">
			<expression xsi:type="Filter">
				<description>Problem status is not resolved or not inactive. In
					other words, the problem is active or status
					is not specified
				</description>
				<source name="PertussisProblems" xsi:type="ExpressionRef"></source>
				<condition xsi:type="Not">
					<operand xsi:type="In">
						<element path="problemStatus" xsi:type="Property">
						</element>
						<collection xsi:type="List">
							<element code="73425007" codeSystem="2.16.840.1.113883.6.96" displayName="Inactive" xsi:type="CodeLiteral"></element>
							<element code="413322009" codeSystem="2.16.840.1.113883.6.96" displayName="Resolved" xsi:type="CodeLiteral"></element>
						</collection>
					</operand>
				</condition>
			</expression>
		</def>

		<def name="HasActivePertussisProblems">
			<expression xsi:type="IsNotEmpty">
				<operand name="ActivePertussisProblems" xsi:type="ExpressionRef"></operand>
			</expression>
		</def>

		<def name="PertussisProblemsAsCauseOfDeath">
			<expression xsi:type="Filter">
				<description>Select those problems that have been marked as cause of
					death
				</description>
				<source name="PertussisProblemsWithDeathVS" xsi:type="ExpressionRef"></source>
				<condition xsi:type="Equal">
					<operand path="wasCauseOfDeath" xsi:type="Property"></operand>
					<operand value="true" xsi:type="BooleanLiteral"></operand>
				</condition>
			</expression>
		</def>

		<def name="DeathWasCausedByPertussis">
			<expression xsi:type="IsNotEmpty">
				<operand name="PertussisProblemsAsCauseOfDeath" xsi:type="ExpressionRef"></operand>
			</expression>
		</def>

		
		
		<def name="PertussisCultureResultsPositive">
			<expression xsi:type="Filter">
				<source name="BPertussisCultureTests" xsi:type="ExpressionRef"></source>
				<condition xsi:type="Or">
					<description>Either the result interpretation is positive or the
						result value is from the
						specified value sets. In the latter case, the result value may indicate
						positive (because the test is
						specific for B Pertussis) or the result value may be the name of the
						organism.
					</description>
					<operand xsi:type="In">
						<description>The interpretation is positive</description>
						<element code="POS" codeSystem=" 2.16.840.1.113883.5.83" displayName="Positive" xsi:type="CodeLiteral"></element>
						<collection path="interpretation" xsi:type="Property"></collection>
					</operand>
					<operand id="TBD-PositiveResultsValueSet" version="1" xsi:type="InValueSet">
						<description>The result is marked as positive</description>
						<operand asType="dt:CD" xsi:type="As">
							<operand path="observationValue" xsi:type="Property"></operand>
						</operand>
					</operand>
					<operand id="2.16.840.1.114222.4.11.7014" version="1" xsi:type="InValueSet">
						<description>The result contains the organism that was identified
							- B Pertussis
						</description>
						<operand asType="dt:CD" xsi:type="As">
							<operand path="observationValue" xsi:type="Property"></operand>
						</operand>
					</operand>
				</condition>
			</expression>
		</def>

		<def name="HasPertussisCultureResultsPositive">
			<expression xsi:type="IsNotEmpty">
				<operand name="PertussisCultureResultsPositive" xsi:type="ExpressionRef"></operand>
			</expression>
		</def>

		<def name="GeneralCultureResultsPositiveForPertussis">
			<expression xsi:type="Filter">
				<description>Select those results that have B Pertussis as the
					result value. Since this is a general culture
					test, we do not test for "positive" results or interpretation.
				</description>
				<source name="GeneralCultureTests" xsi:type="ExpressionRef"></source>
				<condition id="2.16.840.1.114222.4.11.7014" version="1" xsi:type="InValueSet">
					
					<operand asType="dt:CD" xsi:type="As">
						<operand path="observationValue" xsi:type="Property"></operand>
					</operand>
				</condition>
			</expression>
		</def>

		<def name="HasGeneralCultureResultsPositiveForPertussis">
			<expression xsi:type="IsNotEmpty">
				<operand name="GeneralCultureResultsPositiveForPertussis" xsi:type="ExpressionRef"></operand>
			</expression>
		</def>

		<def name="HasBPertussisTestResults">
			<expression xsi:type="IsNotEmpty">
				<operand name="BPertussisTestResults" xsi:type="ExpressionRef"></operand>
			</expression>
		</def>

		<def name="ReportingTopic">
			
			<expression asType="vmr:Problem" xsi:type="As">
				<description>ReportingTopic in essence maps to the data element that
					triggered the rule. It does
					so by looking at which of the data elements have a value associated
					with them.
					ReportingTopic is used in the communication action as the topic that is to be
					reported to the health agency.
				</description>
				<operand xsi:type="Case">
					<description>Select the item that has a non-empty value.
					</description>
					<caseItem>
						<when name="HasActivePertussisProblems" xsi:type="ExpressionRef"></when>
						
						<then asType="vmr:ClinicalStatement" xsi:type="As">
							<operand orderBy="problemEffectiveTime.begin" xsi:type="Last">
								<source name="ActivePertussisProblems" xsi:type="ExpressionRef"></source>
							</operand>
						</then>
					</caseItem>
					<caseItem>
						<when name="DeathWasCausedByPertussis" xsi:type="ExpressionRef"></when>
						
						<then orderBy="problemEffectiveTime.begin" xsi:type="Last">
							<source name="PertussisProblemsAsCauseOfDeath" xsi:type="ExpressionRef"></source>
						</then>
					</caseItem>
					<caseItem>
						<when name="HasPertussisCultureResultsPositive" xsi:type="ExpressionRef"></when>
						
						<then orderBy="observationEventTime.low" xsi:type="Last">
							<source name="PertussisCultureResultsPositive" xsi:type="ExpressionRef"></source>
						</then>
					</caseItem>
					<caseItem>
						<when name="HasGeneralCultureResultsPositiveForPertussis" xsi:type="ExpressionRef"></when>
						
						<then orderBy="observationEventTime.begin" xsi:type="Last">
							<source name="GeneralCultureResultsPositiveForPertussis" xsi:type="ExpressionRef"></source>
						</then>
					</caseItem>
					<caseItem>
						<when name="HasBPertussisTestResults" xsi:type="ExpressionRef"></when>
						
						<then orderBy="observationEventTime.begin" xsi:type="Last">
							<source name="BPertussisTestResults" xsi:type="ExpressionRef"></source>
						</then>
					</caseItem>
					<else valueType="vmr:ClinicalStatement" xsi:type="Null">
						<description>Return null object, if none of the above are true
						</description>
					</else>
				</operand>
			</expression>
		</def>


		
		
		<def name="ProblemEncounter">
			<expression xsi:type="Conditional">
				<description>Get encounter related to problem. Using the First
					expression to
					convert a collection to a single object. The Filter should return a single
					object
				</description>
				<condition xsi:type="Or">
					<description>Applies only if the reporting topic was a problem
					</description>
					<operand name="HasActivePertussisProblems" xsi:type="ExpressionRef"></operand>
					<operand name="DeathWasCausedByPertussis" xsi:type="ExpressionRef"></operand>
				</condition>
				
				<then asType="vmr:EncounterEvent" xsi:type="As">
					<description>Filter should return a collection with only one
						encounter; use First to transform the
						collection into a single
						object
					</description>
					<operand xsi:type="First">
						<source xsi:type="Filter">
							<source path="relatedClinicalStatement" xsi:type="Property">
								<source name="ReportingTopic" xsi:type="ExpressionRef"></source>
							</source>
							<condition xsi:type="Equal">
								<operand path="targetRole" xsi:type="Property"></operand>
								<operand code="COMP" codeSystem="2.16.840.1.113883.5.1002" displayName="has component" xsi:type="CodeLiteral"></operand>
							</condition>
						</source>
					</operand>
					
				</then>
				<else valueType="vmr:EncounterEvent" xsi:type="Null"></else>
			</expression>
		</def>

		<def name="OrderForTest">
			<expression xsi:type="Conditional">
				<condition xsi:type="Or">
					<description>Applies only if the reporting topic was a test result
					</description>
					<operand name="HasPertussisCultureResultsPositive" xsi:type="ExpressionRef"></operand>
					<operand name="HasGeneralCultureResultsPositiveForPertussis" xsi:type="ExpressionRef"></operand>
					<operand name="HasBPertussisTestResults" xsi:type="ExpressionRef"></operand>
				</condition>
				<then asType="vmr:ObservationOrder" xsi:type="As">
					<operand xsi:type="First">
						<description>convert from collection to object</description>
						<source xsi:type="Filter">
							<description>find related order</description>
							<source path="relatedClinicalStatement" xsi:type="Property">
								<source name="ReportingTopic" xsi:type="ExpressionRef"></source>
							</source>
							<condition xsi:type="Equal">
								<operand path="targetRole" xsi:type="Property"></operand>
								<operand code="FLFS" codeSystem="2.16.840.1.113883.5.1002" displayName="fulfills" xsi:type="CodeLiteral"></operand>
							</condition>
						</source>
					</operand>
				</then>
				<else valueType="vmr:ObservationOrder" xsi:type="Null"></else>
			</expression>
		</def>

		<def name="TestOrderEncounter">
			<expression asType="vmr:EncounterEvent" xsi:type="As">
				<description>Get encounter related to test order. Using the First
					expression to
					convert a collection to a single object. The Filter should return a
					collection with a single object
				</description>
				<operand xsi:type="First">
					<source xsi:type="Filter">
						<source path="relatedClinicalStatement" xsi:type="Property">
							<source name="OrderForTest" xsi:type="ExpressionRef"></source>
						</source>
						<condition xsi:type="Equal">
							<operand path="targetRole" xsi:type="Property"></operand>
							<operand code="COMP" codeSystem="2.16.840.1.113883.5.1002" displayName="has component" xsi:type="CodeLiteral"></operand>
						</condition>
					</source>
				</operand>
			</expression>
		</def>

		<def name="RelatedEncounter">
			<expression xsi:type="IfNull">
				<operand name="ProblemEncounter" xsi:type="ExpressionRef"></operand>
				<operand name="TestOrderEncounter" xsi:type="ExpressionRef"></operand>
			</expression>
		</def>

		<def name="RelatedEncounterLocation">
			<expression asType="vmr:Facility" xsi:type="As">
				<description>Get the facility for the related encounter
				</description>
				<operand xsi:type="Last">
					<source xsi:type="Filter">
						<description>Get the facilities from all the encounters, by
							selecting those relatedEntities that have a target role of
							location
						</description>
						<source path="relatedEntity" xsi:type="Property">
							<source name="RelatedEncounter" xsi:type="ExpressionRef"></source>
						</source>
						<condition xsi:type="Equal">
							<operand path="targetRole" xsi:type="Property"></operand>
							<operand code="LOC" codeSystem="2.16.840.1.113883.5.90" codeSystemName="HL7 ParticipationType" xsi:type="CodeLiteral"></operand>
						</condition>
					</source>
				</operand>
			</expression>
		</def>

		<def name="RelatedEncounterWasInSDCounty">
			<expression xsi:type="Equal">
				<description>Is San Diego the county</description>
				<operand path="value" xsi:type="Property">
					<source xsi:type="First">
						<source xsi:type="Filter">
							<description>Get the county part of the address</description>
							<source path="part" xsi:type="Property">
								<source xsi:type="First">
									<source xsi:type="Filter">
										<source path="address" xsi:type="Property">
											<source name="RelatedEncounterLocation" xsi:type="ExpressionRef"></source>
										</source>
										<condition xsi:type="Contains">
											<description>Physical address</description>
											<source path="use" xsi:type="Property"></source>
											<element value="PHYS" xsi:type="StringLiteral"></element>
										</condition>
									</source>
								</source>
							</source>
							<condition xsi:type="Equal">
								<operand path="type" xsi:type="Property"></operand>
								<operand value="CNT" xsi:type="StringLiteral"></operand>
							</condition>
						</source>
					</source>
				</operand>
				<operand value="San Diego" xsi:type="StringLiteral"></operand>
			</expression>
		</def>

		<def name="CommunicateTopicToRecipient">
			
			<expression objectType="vmr:CommunicationProposal" xsi:type="ObjectExpression">
				<description>This expression is the action object to notify the
					health agency. The base action
					is defined here. Within the actions section, the expression is
					redefined to include
					the communication method.
				</description>
				<property name="reason">
					<value code="170516003" codeSystem="2.16.840.1.113883.6.96" displayName="Notification of disease" xsi:type="CodeLiteral"></value>
				</property>
				<property name="topic">
					<value name="ReportingTopic" xsi:type="ExpressionRef"></value>
				</property>
				<property name="proposedCommunicationTime">
					<value xsi:type="Interval">
						<description>The disease notification must occur within one day
						</description>
						<begin xsi:type="Today"></begin>
						<end xsi:type="DateAdd">
							<date xsi:type="Today"></date>
							<granularity value="Day" valueType="DateGranularity" xsi:type="Literal"></granularity>
							<numberOfPeriods value="1" xsi:type="IntegerLiteral"></numberOfPeriods>
						</end>
					</value>
				</property>
				<property name="recipient">
					<value xsi:type="ComplexLiteral">
						<value xsi:type="vmr:Organization">
							<vmr:name xmlns:vmr="urn:hl7-org:vmr:r2">
								<dt:part xmlns:dt="urn:hl7-org:cdsdt:r2" type="TITLE" value="County of San Diego Health and Human Services Agency"></dt:part>
							</vmr:name>
						</value>
					</value>
				</property>
			</expression>
		</def>

	</expressions>

	<triggers>
		<trigger>
			<eventType>DataEvent</eventType>
			<expression name="PertussisProblems" xsi:type="ExpressionRef"></expression>
		</trigger>
		<trigger>
			<eventType>DataEvent</eventType>
			<expression name="PertussisProblemsWithDeathVS" xsi:type="ExpressionRef"></expression>
		</trigger>
		<trigger>
			<eventType>DataEvent</eventType>
			<expression name="BPertussisTestResults" xsi:type="ExpressionRef"></expression>
		</trigger>
		<trigger>
			<eventType>DataEvent</eventType>
			<expression name="BPertussisCultureTests" xsi:type="ExpressionRef"></expression>
		</trigger>
		<trigger>
			<eventType>DataEvent</eventType>
			<expression name="GeneralCultureTests" xsi:type="ExpressionRef"></expression>
		</trigger>
	</triggers>

	<conditions>
		
		<condition>
			<logic xsi:type="And">
				<description>(Patient lives in SD or Care encounter was in SD) and
					(Diagnosed with Pertussis or Cause of Death was Pertussis
					or Test results specific to pertussis available or culture results
					positive for pertussis)
				</description>
				<operand xsi:type="Or">
					<operand name="PatientLivesInSDCounty" xsi:type="ExpressionRef"></operand>
					<operand name="RelatedEncounterWasInSDCounty" xsi:type="ExpressionRef"></operand>
				</operand>
				<operand xsi:type="Or">
					
					<operand name="HasActivePertussisProblems" xsi:type="ExpressionRef"></operand>
					<operand name="DeathWasCausedByPertussis" xsi:type="ExpressionRef"></operand>
					<operand name="HasPertussisCultureResultsPositive" xsi:type="ExpressionRef"></operand>
					<operand name="HasGeneralCultureResultsPositiveForPertussis" xsi:type="ExpressionRef"></operand>
					<operand name="HasBPertussisTestResults" xsi:type="ExpressionRef"></operand>
				</operand>
			</logic>
			<conditionRole value="ApplicableScenario"></conditionRole>
		</condition>
	</conditions>
	<actionGroup>
		<subElements>
			
			
			<simpleAction xsi:type="CreateAction">
				<actionSentence objectType="vmr:CommunicationProposal" xsi:type="ObjectExpression">
					<property name="message">
						<value xsi:type="ComplexLiteral">
							<value value="This patient has or is suspected of having pertussis. Patients diagnosed with or suspected of having pertussis must be reported to County of San Diego Health and Human Services Agency within one working day of identification or suspicion" xsi:type="dt:ED"></value>
						</value>
					</property>
				</actionSentence>
			</simpleAction>
			<actionGroup>
				<supportingResources>
					<resource>
						<title value="Reporting/submission form"></title>
						<location value="http://www.sdcounty.ca.gov/hhsa/programs/phs/community_epidemiology/disease_reporting_requirements_for_health_care_providers.html"></location>
					</resource>
				</supportingResources>

				
				<behaviors>
					<behavior value="SentenceGroup" xsi:type="GroupOrganizationBehavior"></behavior>
				</behaviors>
				<title value="Notify County of San Diego Health and Human Services Agency"></title>
				<subElements>
					<simpleAction xsi:type="CreateAction">
						<behaviors>
							<behavior value="No" xsi:type="PrecheckBehavior"></behavior>
						</behaviors>
						<textEquivalent value="mail to epi program at SDDHHS"></textEquivalent>
						<actionSentence xsi:type="ObjectRedefine">
							<source name="CommunicateTopicToRecipient" xsi:type="ExpressionRef"></source>
							<property name="recipient">
								<value xsi:type="ComplexLiteral">
									<value xsi:type="vmr:Organization">
										<vmr:name xmlns:vmr="urn:hl7-org:vmr:r2">
											<dt:part xmlns:dt="urn:hl7-org:cdsdt:r2" type="TITLE" value="County of San Diego Health and Human Services Agency"></dt:part>
										</vmr:name>
										<vmr:address xmlns:vmr="urn:hl7-org:vmr:r2">
											<dt:part xmlns:dt="urn:hl7-org:cdsdt:r2" type="SAL" value="3851 Rosecrans Street"></dt:part>
											<dt:part xmlns:dt="urn:hl7-org:cdsdt:r2" type="ADL" value="Mailstop P577"></dt:part>
											<dt:part xmlns:dt="urn:hl7-org:cdsdt:r2" type="CTY" value="San Diego"></dt:part>
											<dt:part xmlns:dt="urn:hl7-org:cdsdt:r2" type="ZIP" value="92110"></dt:part>
											<dt:part xmlns:dt="urn:hl7-org:cdsdt:r2" type="STA" value="CA"></dt:part>
											<dt:part xmlns:dt="urn:hl7-org:cdsdt:r2" type="CNT" value="USA"></dt:part>
										</vmr:address>

									</value>
								</value>
							</property>
						</actionSentence>
					</simpleAction>
					<simpleAction xsi:type="CreateAction">
						<behaviors>
							<behavior value="No" xsi:type="PrecheckBehavior"></behavior>
						</behaviors>
						<textEquivalent value="phone epi program at SDDHHS"></textEquivalent>
						<actionSentence xsi:type="ObjectRedefine">
							<source name="CommunicateTopicToRecipient" xsi:type="ExpressionRef"></source>
							<property name="recipient">
								<value xsi:type="ComplexLiteral">
									<value xsi:type="vmr:Organization">
										<vmr:name xmlns:vmr="urn:hl7-org:vmr:r2">
											<dt:part xmlns:dt="urn:hl7-org:cdsdt:r2" type="TITLE" value="County of San Diego Health and Human Services Agency"></dt:part>
										</vmr:name>

										<vmr:telecom xmlns:vmr="urn:hl7-org:vmr:r2" capabilities="voice" use="WP" value="tel:619-692-8499"></vmr:telecom>
									</value>
								</value>
							</property>
						</actionSentence>
					</simpleAction>
					<simpleAction xsi:type="CreateAction">
						<behaviors>
							<behavior value="No" xsi:type="PrecheckBehavior"></behavior>
						</behaviors>
						<textEquivalent value="fax epi program at SDDHHS"></textEquivalent>
						<actionSentence xsi:type="ObjectRedefine">
							<source name="CommunicateTopicToRecipient" xsi:type="ExpressionRef"></source>
							<property name="recipient">
								<value xsi:type="ComplexLiteral">
									<value xsi:type="vmr:Organization">
										<vmr:name xmlns:vmr="urn:hl7-org:vmr:r2">
											<dt:part xmlns:dt="urn:hl7-org:cdsdt:r2" type="TITLE" value="County of San Diego Health and Human Services Agency"></dt:part>
										</vmr:name>
										<vmr:telecom xmlns:vmr="urn:hl7-org:vmr:r2" capabilities="fax" use="WP" value="tel:858-715-6458"></vmr:telecom>
									</value>
								</value>
							</property>
						</actionSentence>
					</simpleAction>
					<simpleAction xsi:type="CreateAction">
						<behaviors>
							<behavior value="Yes" xsi:type="PrecheckBehavior"></behavior>
						</behaviors>
						<textEquivalent value="report via web to epi program at SDDHHS"></textEquivalent>
						<actionSentence xsi:type="ObjectRedefine">
							<source name="CommunicateTopicToRecipient" xsi:type="ExpressionRef"></source>
							<property name="recipient">
								<value xsi:type="ComplexLiteral">
									<value xsi:type="vmr:Organization">
										<vmr:name xmlns:vmr="urn:hl7-org:vmr:r2">
											<dt:part xmlns:dt="urn:hl7-org:cdsdt:r2" type="TITLE" value="County of San Diego Health and Human Services Agency"></dt:part>
										</vmr:name>
										<vmr:telecom xmlns:vmr="urn:hl7-org:vmr:r2" capabilities="data" value="http://www.sdcounty.ca.gov/hhsa/programs/phs/community_epidemiology/disease_reporting_requirements_for_health_care_providers.html"></vmr:telecom>
									</value>
								</value>
							</property>
						</actionSentence>
					</simpleAction>
				</subElements>
			</actionGroup>
		</subElements>
	</actionGroup>
</knowledgeDocument>